import streamlit as st

def app():
    st.title('Anderson')

    # Number of exams input
    exam_number = st.number_input("Enter the number of exams:")

    # If the number of exams is negative, display error and ask again
    if exam_number < 0:
        st.error("ERROR: Number of exams must be positive.")
        exam_number = st.number_input("Enter the number of exams again:")
        keep_going = "y"
    total = 0
    key = 0

    while keep_going.lower() == "yes":
        student_number = st.number_input("Enter the number of students:")

        # If the number of students is negative, display error and ask again
        if student_number < 0:
            st.error("ERROR: Number of students must be positive.")
            student_number = st.number_input("Enter the number of students again:")

        for s_num in range(student_number):
            personal_total = 0
            st.write(f"Student number: {s_num + 1}")
            st.write("-" * 35)
            
            for e_num in range(exam_number):
                score = st.number_input(f"What is the score of student {s_num + 1 + key}, exam {e_num + 1}:", min_value=0, max_value=100, step=0.01)
                personal_total += score
                total += score
            
            personal_average = personal_total / exam_number
            st.write(f"The average score of student {s_num + 1} is: {personal_average}")
            st.write("=" * 35)
        
        # Ask if user wants to calculate scores for more students
        keep_going = st.radio('Do you want to calculate scores for more students?', ('Yes', 'No'))
        key += student_number

    # Display the total average
    st.write("=" * 35)
    total_average = total / exam_number/(key+student_number)
    st.write("The average score (all exams) of the class is:", total_average)
